<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>E-Commerce DB â€” Complete ER Diagram</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Clash+Display:wght@400;600;700&family=DM+Sans:wght@400;500;700&display=swap');

:root {
  --bg: #060912;
  --surface: #0d1321;
  --card: #111827;
  --border: #1c2a3a;
  --text: #e8edf5;
  --muted: #4a6080;
  --mono: 'JetBrains Mono', monospace;

  /* 10 Section Colors */
  --c1: #38bdf8;   /* Sky Blue     â€” User & Auth */
  --c2: #a78bfa;   /* Violet       â€” Products & Catalog */
  --c3: #34d399;   /* Emerald      â€” Orders & Transactions */
  --c4: #fb923c;   /* Orange       â€” Inventory & Stock */
  --c5: #f472b6;   /* Pink         â€” Payments & Commissions */
  --c6: #facc15;   /* Yellow       â€” Shipping & Fulfillment */
  --c7: #f87171;   /* Red          â€” Reviews & Ratings */
  --c8: #2dd4bf;   /* Teal         â€” Marketing & Promotions */
  --c9: #c084fc;   /* Purple       â€” Content Management */
  --c10: #94a3b8;  /* Slate        â€” System & Logs */
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  min-height: 100vh;
  padding: 2rem 1.5rem 4rem;
}

body::before {
  content: '';
  position: fixed;
  inset: 0;
  background:
    radial-gradient(ellipse 80% 50% at 50% -20%, rgba(56,189,248,0.06) 0%, transparent 60%),
    radial-gradient(ellipse 60% 40% at 80% 80%, rgba(167,139,250,0.05) 0%, transparent 50%);
  pointer-events: none;
  z-index: 0;
}

.wrapper { position: relative; z-index: 1; max-width: 1700px; margin: 0 auto; }

/* â”€â”€ HEADER â”€â”€ */
header { text-align: center; margin-bottom: 2.5rem; }

.db-badge {
  display: inline-block;
  font-family: var(--mono);
  font-size: 0.65rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--muted);
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--border);
  padding: 0.35rem 1rem;
  border-radius: 100px;
  margin-bottom: 1rem;
}

header h1 {
  font-size: clamp(1.6rem, 3.5vw, 2.8rem);
  font-weight: 700;
  letter-spacing: -0.03em;
  line-height: 1.1;
  background: linear-gradient(120deg, #38bdf8 0%, #a78bfa 40%, #34d399 80%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 0.75rem;
}

.stats-row {
  display: flex;
  gap: 1.5rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 1rem;
}

.stat {
  font-family: var(--mono);
  font-size: 0.72rem;
  color: var(--muted);
  letter-spacing: 0.05em;
}
.stat strong { color: var(--text); font-size: 0.85rem; }

/* â”€â”€ COLOR LEGEND â”€â”€ */
.legend-box {
  background: rgba(255,255,255,0.02);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 2rem;
}

.legend-title {
  font-family: var(--mono);
  font-size: 0.62rem;
  letter-spacing: 0.2em;
  text-transform: uppercase;
  color: var(--muted);
  text-align: center;
  margin-bottom: 1.25rem;
}

.legend-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 0.6rem;
}

.litem {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.65rem 0.9rem;
  border-radius: 10px;
  border: 1px solid transparent;
  transition: all 0.2s;
  cursor: default;
}
.litem:hover { transform: translateX(4px); }

.ldot {
  width: 10px; height: 10px;
  border-radius: 50%;
  flex-shrink: 0;
}

.lnum {
  font-family: var(--mono);
  font-size: 0.6rem;
  opacity: 0.5;
  flex-shrink: 0;
}

.lname { font-size: 0.8rem; font-weight: 600; }
.lcount { font-family: var(--mono); font-size: 0.65rem; opacity: 0.55; margin-left: auto; }

.l1  { background: rgba(56,189,248,0.06);  border-color: rgba(56,189,248,0.2);  color: var(--c1);  }
.l2  { background: rgba(167,139,250,0.06); border-color: rgba(167,139,250,0.2); color: var(--c2);  }
.l3  { background: rgba(52,211,153,0.06);  border-color: rgba(52,211,153,0.2);  color: var(--c3);  }
.l4  { background: rgba(251,146,60,0.06);  border-color: rgba(251,146,60,0.2);  color: var(--c4);  }
.l5  { background: rgba(244,114,182,0.06); border-color: rgba(244,114,182,0.2); color: var(--c5);  }
.l6  { background: rgba(250,204,21,0.06);  border-color: rgba(250,204,21,0.2);  color: var(--c6);  }
.l7  { background: rgba(248,113,113,0.06); border-color: rgba(248,113,113,0.2); color: var(--c7);  }
.l8  { background: rgba(45,212,191,0.06);  border-color: rgba(45,212,191,0.2);  color: var(--c8);  }
.l9  { background: rgba(192,132,252,0.06); border-color: rgba(192,132,252,0.2); color: var(--c9);  }
.l10 { background: rgba(148,163,184,0.06); border-color: rgba(148,163,184,0.2); color: var(--c10); }

/* â”€â”€ SECTION CARDS â”€â”€ */
.sections { display: grid; grid-template-columns: repeat(auto-fit, minmax(500px, 1fr)); gap: 1.5rem; }

.scard {
  background: var(--card);
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid var(--border);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.scard:hover { transform: translateY(-4px); box-shadow: 0 24px 48px rgba(0,0,0,0.5); }

.shead {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.9rem 1.2rem;
  border-bottom: 1px solid var(--border);
}

.sbar { width: 4px; height: 22px; border-radius: 3px; flex-shrink: 0; }
.snum { font-family: var(--mono); font-size: 0.6rem; color: var(--muted); background: rgba(255,255,255,0.05); padding: 0.2rem 0.5rem; border-radius: 4px; }
.slabel { font-size: 0.8rem; font-weight: 700; letter-spacing: 0.05em; text-transform: uppercase; flex: 1; }
.stables { font-family: var(--mono); font-size: 0.62rem; color: var(--muted); }

/* color per section */
.s1  .sbar, .s1  .slabel { background: var(--c1);  color: var(--c1);  }
.s2  .sbar, .s2  .slabel { background: var(--c2);  color: var(--c2);  }
.s3  .sbar, .s3  .slabel { background: var(--c3);  color: var(--c3);  }
.s4  .sbar, .s4  .slabel { background: var(--c4);  color: var(--c4);  }
.s5  .sbar, .s5  .slabel { background: var(--c5);  color: var(--c5);  }
.s6  .sbar, .s6  .slabel { background: var(--c6);  color: var(--c6);  }
.s7  .sbar, .s7  .slabel { background: var(--c7);  color: var(--c7);  }
.s8  .sbar, .s8  .slabel { background: var(--c8);  color: var(--c8);  }
.s9  .sbar, .s9  .slabel { background: var(--c9);  color: var(--c9);  }
.s10 .sbar, .s10 .slabel { background: var(--c10); color: var(--c10); }

.sbody { padding: 1rem; overflow-x: auto; }
.mermaid { text-align: center; }
</style>
</head>
<body>
<div class="wrapper">

  <header>
    <div class="db-badge">MySQL 8.0+ Â· InnoDB Â· utf8mb4</div>
    <h1>E-Commerce Platform<br>Complete Database Schema</h1>
    <div class="stats-row">
      <div class="stat"><strong>65</strong> Tables</div>
      <div class="stat"><strong>10</strong> Sections</div>
      <div class="stat"><strong>3</strong> Views</div>
      <div class="stat"><strong>5</strong> Triggers</div>
      <div class="stat"><strong>2</strong> Procedures</div>
    </div>
  </header>

  <!-- â•â• COLOR LEGEND â•â• -->
  <div class="legend-box">
    <div class="legend-title">ðŸŽ¨ Color Coding â€” Har Color Ka Matlab (Section-wise)</div>
    <div class="legend-grid">
      <div class="litem l1">  <div class="ldot" style="background:var(--c1)"></div>  <span class="lnum">01</span><span class="lname">User &amp; Authentication</span>   <span class="lcount">8 tables</span>  </div>
      <div class="litem l2">  <div class="ldot" style="background:var(--c2)"></div>  <span class="lnum">02</span><span class="lname">Products &amp; Catalog</span>       <span class="lcount">12 tables</span> </div>
      <div class="litem l3">  <div class="ldot" style="background:var(--c3)"></div>  <span class="lnum">03</span><span class="lname">Orders &amp; Transactions</span>    <span class="lcount">10 tables</span> </div>
      <div class="litem l4">  <div class="ldot" style="background:var(--c4)"></div>  <span class="lnum">04</span><span class="lname">Inventory &amp; Stock</span>        <span class="lcount">6 tables</span>  </div>
      <div class="litem l5">  <div class="ldot" style="background:var(--c5)"></div>  <span class="lnum">05</span><span class="lname">Payments &amp; Commissions</span>   <span class="lcount">7 tables</span>  </div>
      <div class="litem l6">  <div class="ldot" style="background:var(--c6)"></div>  <span class="lnum">06</span><span class="lname">Shipping &amp; Fulfillment</span>   <span class="lcount">5 tables</span>  </div>
      <div class="litem l7">  <div class="ldot" style="background:var(--c7)"></div>  <span class="lnum">07</span><span class="lname">Reviews &amp; Ratings</span>        <span class="lcount">4 tables</span>  </div>
      <div class="litem l8">  <div class="ldot" style="background:var(--c8)"></div>  <span class="lnum">08</span><span class="lname">Marketing &amp; Promotions</span>   <span class="lcount">6 tables</span>  </div>
      <div class="litem l9">  <div class="ldot" style="background:var(--c9)"></div>  <span class="lnum">09</span><span class="lname">Content Management</span>       <span class="lcount">4 tables</span>  </div>
      <div class="litem l10"><div class="ldot" style="background:var(--c10)"></div> <span class="lnum">10</span><span class="lname">System &amp; Logs</span>            <span class="lcount">3+ tables</span></div>
    </div>
  </div>

  <div class="sections">

    <!-- â•â• SECTION 1: USER & AUTH (SKY BLUE) â•â• -->
    <div class="scard s1">
      <div class="shead">
        <div class="sbar"></div>
        <span class="snum">01</span>
        <span class="slabel">User &amp; Authentication</span>
        <span class="stables">8 tables</span>
      </div>
      <div class="sbody">
        <div class="mermaid">
%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#0c1f30','primaryBorderColor':'#38bdf8','primaryTextColor':'#7dd3fc','lineColor':'#38bdf8','fontSize':'12px','edgeLabelBackground':'#0c1f30'}}}%%
erDiagram
    users {
        bigint id PK
        varchar email UK
        timestamp email_verified_at
        varchar password
        varchar first_name
        varchar last_name
        varchar phone
        varchar avatar
        date date_of_birth
        enum gender
        enum user_type
        enum status
        boolean two_factor_enabled
        timestamp last_login_at
        varchar last_login_ip
        int login_count
        int failed_login_attempts
        timestamp locked_until
        varchar preferred_language
        varchar preferred_currency
        varchar timezone
        timestamp created_at
        timestamp deleted_at
    }
    user_roles {
        bigint id PK
        bigint user_id FK
        bigint role_id FK
        timestamp created_at
    }
    roles {
        bigint id PK
        varchar name UK
        varchar display_name
        text description
        timestamp created_at
    }
    permissions {
        bigint id PK
        varchar name UK
        varchar display_name
        text description
        varchar module
        timestamp created_at
    }
    role_permissions {
        bigint id PK
        bigint role_id FK
        bigint permission_id FK
        timestamp created_at
    }
    user_addresses {
        bigint id PK
        bigint user_id FK
        enum address_type
        varchar full_name
        varchar phone
        varchar address_line1
        varchar address_line2
        varchar city
        varchar state
        varchar postal_code
        varchar country
        varchar country_code
        boolean is_default
    }
    password_resets {
        bigint id PK
        varchar email
        varchar token
        timestamp created_at
        timestamp expires_at
    }
    user_sessions {
        bigint id PK
        bigint user_id FK
        varchar session_token UK
        varchar ip_address
        text user_agent
        varchar device_type
        varchar browser
        varchar os
        timestamp last_activity
        timestamp expires_at
    }

    users ||--o{ user_roles : "assigned"
    user_roles }o--|| roles : "has"
    roles ||--o{ role_permissions : "grants"
    role_permissions }o--|| permissions : "includes"
    users ||--o{ user_addresses : "has"
    users ||--o{ user_sessions : "creates"
        </div>
      </div>
    </div>

    <!-- â•â• SECTION 2: PRODUCTS & CATALOG (VIOLET) â•â• -->
    <div class="scard s2">
      <div class="shead">
        <div class="sbar"></div>
        <span class="snum">02</span>
        <span class="slabel">Products &amp; Catalog</span>
        <span class="stables">12 tables</span>
      </div>
      <div class="sbody">
        <div class="mermaid">
%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#1a1230','primaryBorderColor':'#a78bfa','primaryTextColor':'#c4b5fd','lineColor':'#a78bfa','fontSize':'12px'}}}%%
erDiagram
    categories {
        bigint id PK
        bigint parent_id FK
        varchar name
        varchar slug UK
        text description
        varchar icon
        varchar image_url
        int display_order
        boolean is_active
        int product_count
    }
    attributes {
        bigint id PK
        varchar name
        varchar slug UK
        enum type
        int display_order
        boolean is_global
        boolean is_visible
        boolean is_filterable
        boolean is_required
    }
    attribute_values {
        bigint id PK
        bigint attribute_id FK
        varchar value
        varchar display_value
        varchar color_code
        int display_order
    }
    category_attributes {
        bigint id PK
        bigint category_id FK
        bigint attribute_id FK
        boolean is_required
        int display_order
    }
    products {
        bigint id PK
        bigint vendor_id FK
        bigint category_id FK
        varchar name
        varchar slug
        varchar sku UK
        varchar barcode
        decimal price
        decimal sale_price
        decimal cost_price
        timestamp sale_start_date
        timestamp sale_end_date
        int stock_quantity
        int low_stock_threshold
        boolean track_inventory
        boolean allow_backorders
        decimal weight
        enum type
        enum status
        enum visibility
        boolean is_featured
        decimal rating_average
        int rating_count
        int view_count
        int sale_count
        timestamp published_at
        timestamp deleted_at
    }
    product_images {
        bigint id PK
        bigint product_id FK
        varchar image_url
        varchar thumbnail_url
        varchar alt_text
        boolean is_primary
        int display_order
    }
    product_variants {
        bigint id PK
        bigint product_id FK
        varchar sku UK
        varchar variant_name
        decimal price
        decimal sale_price
        int stock_quantity
        decimal weight
        varchar image_url
        boolean is_active
    }
    product_variant_attributes {
        bigint id PK
        bigint variant_id FK
        bigint attribute_id FK
        bigint attribute_value_id FK
    }
    product_attributes {
        bigint id PK
        bigint product_id FK
        bigint attribute_id FK
        bigint attribute_value_id FK
        text custom_value
    }

    categories ||--o{ categories : "parent-child"
    categories ||--o{ category_attributes : "requires"
    category_attributes }o--|| attributes : "uses"
    attributes ||--o{ attribute_values : "has"
    categories ||--o{ products : "contains"
    products ||--o{ product_images : "has"
    products ||--o{ product_variants : "has"
    products ||--o{ product_attributes : "tagged"
    product_variants ||--o{ product_variant_attributes : "defined by"
    product_variant_attributes }o--|| attribute_values : "value"
        </div>
      </div>
    </div>

    <!-- â•â• SECTION 3: ORDERS & TRANSACTIONS (EMERALD) â•â• -->
    <div class="scard s3">
      <div class="shead">
        <div class="sbar"></div>
        <span class="snum">03</span>
        <span class="slabel">Orders &amp; Transactions</span>
        <span class="stables">10 tables</span>
      </div>
      <div class="sbody">
        <div class="mermaid">
%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#0a2018','primaryBorderColor':'#34d399','primaryTextColor':'#6ee7b7','lineColor':'#34d399','fontSize':'12px'}}}%%
erDiagram
    orders {
        bigint id PK
        varchar order_number UK
        bigint user_id FK
        varchar guest_email
        bigint shipping_address_id FK
        bigint billing_address_id FK
        decimal subtotal
        decimal discount_amount
        decimal shipping_amount
        decimal tax_amount
        decimal total_amount
        varchar currency
        varchar coupon_code
        decimal coupon_discount
        enum status
        enum payment_status
        enum fulfillment_status
        varchar payment_method
        varchar payment_gateway
        varchar transaction_id
        varchar customer_ip
        timestamp paid_at
        timestamp shipped_at
        timestamp delivered_at
        timestamp cancelled_at
    }
    order_addresses {
        bigint id PK
        varchar full_name
        varchar email
        varchar phone
        varchar address_line1
        varchar address_line2
        varchar city
        varchar state
        varchar postal_code
        varchar country
        varchar country_code
    }
    order_items {
        bigint id PK
        bigint order_id FK
        bigint product_id FK
        bigint variant_id FK
        bigint vendor_id FK
        varchar product_name
        varchar product_sku
        varchar variant_name
        decimal unit_price
        int quantity
        decimal subtotal
        decimal discount
        decimal tax
        decimal total
        decimal commission_rate
        decimal commission_amount
        decimal vendor_earnings
        varchar product_image_url
        json product_attributes
    }
    order_status_history {
        bigint id PK
        bigint order_id FK
        varchar old_status
        varchar new_status
        text comment
        bigint changed_by FK
        timestamp created_at
    }
    order_notes {
        bigint id PK
        bigint order_id FK
        text note
        boolean is_customer_note
        bigint created_by FK
    }
    refunds {
        bigint id PK
        bigint order_id FK
        varchar refund_number UK
        decimal refund_amount
        enum reason
        text reason_details
        enum status
        enum refund_method
        bigint processed_by FK
        timestamp processed_at
        varchar transaction_id
    }
    refund_items {
        bigint id PK
        bigint refund_id FK
        bigint order_item_id FK
        int quantity
        decimal refund_amount
    }
    transactions {
        bigint id PK
        bigint order_id FK
        varchar transaction_id UK
        enum type
        decimal amount
        varchar currency
        varchar payment_gateway
        json gateway_response
        enum status
        varchar error_code
        text error_message
        timestamp processed_at
    }
    abandoned_carts {
        bigint id PK
        bigint user_id FK
        varchar session_id
        varchar email
        json cart_data
        decimal total_amount
        boolean recovered
        bigint recovered_order_id FK
        int reminder_sent_count
        timestamp abandoned_at
    }
    wishlists {
        bigint id PK
        bigint user_id FK
        bigint product_id FK
        bigint variant_id FK
        timestamp added_at
    }

    orders ||--o{ order_items : "contains"
    orders ||--o{ order_status_history : "tracks"
    orders ||--o{ order_notes : "notes"
    orders ||--o{ refunds : "refunded via"
    orders ||--o{ transactions : "paid via"
    order_addresses ||--o{ orders : "shipping"
    refunds ||--o{ refund_items : "covers"
        </div>
      </div>
    </div>

    <!-- â•â• SECTION 4: INVENTORY & STOCK (ORANGE) â•â• -->
    <div class="scard s4">
      <div class="shead">
        <div class="sbar"></div>
        <span class="snum">04</span>
        <span class="slabel">Inventory &amp; Stock</span>
        <span class="stables">6 tables</span>
      </div>
      <div class="sbody">
        <div class="mermaid">
%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#201008','primaryBorderColor':'#fb923c','primaryTextColor':'#fdba74','lineColor':'#fb923c','fontSize':'12px'}}}%%
erDiagram
    inventory_logs {
        bigint id PK
        bigint product_id FK
        bigint variant_id FK
        enum type
        int quantity_before
        int quantity_change
        int quantity_after
        varchar reference_type
        bigint reference_id
        text notes
        bigint created_by FK
        timestamp created_at
    }
    stock_alerts {
        bigint id PK
        bigint product_id FK
        bigint variant_id FK
        enum alert_type
        int current_quantity
        int threshold_quantity
        boolean is_resolved
        timestamp resolved_at
        timestamp created_at
    }
    warehouses {
        bigint id PK
        bigint vendor_id FK
        varchar name
        varchar code UK
        varchar address_line1
        varchar city
        varchar state
        varchar country
        varchar contact_person
        varchar phone
        boolean is_active
        boolean is_primary
    }
    warehouse_inventory {
        bigint id PK
        bigint warehouse_id FK
        bigint product_id FK
        bigint variant_id FK
        int quantity
        int reserved_quantity
        int available_quantity
        timestamp last_counted_at
    }
    inventory_reservations {
        bigint id PK
        bigint order_id FK
        bigint order_item_id FK
        bigint product_id FK
        bigint variant_id FK
        int quantity
        enum status
        timestamp expires_at
        timestamp released_at
    }
    stock_transfers {
        bigint id PK
        varchar transfer_number UK
        bigint from_warehouse_id FK
        bigint to_warehouse_id FK
        bigint product_id FK
        bigint variant_id FK
        int quantity
        enum status
        text notes
        bigint transferred_by FK
        bigint received_by FK
        timestamp transferred_at
        timestamp received_at
    }

    products ||--o{ inventory_logs : "logged"
    products ||--o{ stock_alerts : "alerts"
    products ||--o{ warehouse_inventory : "stored in"
    products ||--o{ inventory_reservations : "reserved"
    warehouses ||--o{ warehouse_inventory : "holds"
    warehouses ||--o{ stock_transfers : "from"
    warehouses ||--o{ stock_transfers : "to"
        </div>
      </div>
    </div>

    <!-- â•â• SECTION 5: PAYMENTS & COMMISSIONS (PINK) â•â• -->
    <div class="scard s5">
      <div class="shead">
        <div class="sbar"></div>
        <span class="snum">05</span>
        <span class="slabel">Payments &amp; Commissions</span>
        <span class="stables">7 tables</span>
      </div>
      <div class="sbody">
        <div class="mermaid">
%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#250d1a','primaryBorderColor':'#f472b6','primaryTextColor':'#f9a8d4','lineColor':'#f472b6','fontSize':'12px'}}}%%
erDiagram
    vendors {
        bigint id PK
        bigint user_id FK
        varchar store_name UK
        varchar store_slug UK
        varchar business_name
        enum business_type
        varchar tax_id
        decimal commission_rate
        enum status
        boolean verified
        timestamp verified_at
        int total_products
        decimal total_sales
        int total_orders
        decimal average_rating
    }
    vendor_bank_accounts {
        bigint id PK
        bigint vendor_id FK
        varchar account_holder_name
        varchar bank_name
        varchar account_number
        varchar routing_number
        enum account_type
        varchar swift_code
        varchar iban
        boolean is_verified
        timestamp verified_at
        boolean is_default
    }
    vendor_payouts {
        bigint id PK
        bigint vendor_id FK
        bigint bank_account_id FK
        varchar payout_reference UK
        decimal gross_amount
        decimal commission_amount
        decimal gateway_fee
        decimal adjustments
        decimal net_amount
        date period_from
        date period_to
        enum status
        enum payment_method
        varchar transaction_id
        timestamp requested_at
        timestamp processed_at
        timestamp completed_at
    }
    transactions {
        bigint id PK
        bigint order_id FK
        varchar transaction_id UK
        enum type
        decimal amount
        varchar currency
        varchar payment_gateway
        json gateway_response
        enum status
        varchar error_code
        timestamp processed_at
    }
    fraud_checks {
        bigint id PK
        bigint order_id FK
        int risk_score
        enum risk_level
        json checks_performed
        json flags
        enum decision
        bigint reviewed_by FK
        timestamp reviewed_at
        text review_notes
    }
    ip_blocks {
        bigint id PK
        varchar ip_address UK
        text reason
        enum block_type
        boolean is_active
        timestamp expires_at
        bigint blocked_by FK
    }
    settings {
        bigint id PK
        varchar key UK
        longtext value
        enum type
        varchar group
        text description
    }

    vendors ||--o{ vendor_bank_accounts : "has"
    vendors ||--o{ vendor_payouts : "receives"
    vendor_bank_accounts ||--o{ vendor_payouts : "paid to"
    orders ||--o{ transactions : "paid via"
    orders ||--o{ fraud_checks : "checked"
        </div>
      </div>
    </div>

    <!-- â•â• SECTION 6: SHIPPING & FULFILLMENT (YELLOW) â•â• -->
    <div class="scard s6">
      <div class="shead">
        <div class="sbar"></div>
        <span class="snum">06</span>
        <span class="slabel">Shipping &amp; Fulfillment</span>
        <span class="stables">5 tables</span>
      </div>
      <div class="sbody">
        <div class="mermaid">
%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#1e1800','primaryBorderColor':'#facc15','primaryTextColor':'#fde68a','lineColor':'#facc15','fontSize':'12px'}}}%%
erDiagram
    shipping_zones {
        bigint id PK
        bigint vendor_id FK
        varchar name
        json countries
        boolean is_active
    }
    shipping_methods {
        bigint id PK
        bigint shipping_zone_id FK
        varchar name
        text description
        enum rate_type
        decimal flat_rate
        decimal rate_per_kg
        decimal rate_percentage
        decimal free_shipping_threshold
        int min_delivery_days
        int max_delivery_days
        boolean is_active
        int display_order
    }
    shipments {
        bigint id PK
        bigint order_id FK
        varchar shipment_number UK
        varchar carrier
        varchar tracking_number
        varchar tracking_url
        varchar shipping_method
        enum status
        decimal weight
        decimal shipping_cost
        timestamp shipped_at
        timestamp estimated_delivery
        timestamp delivered_at
    }
    shipment_items {
        bigint id PK
        bigint shipment_id FK
        bigint order_item_id FK
        int quantity
    }
    shipment_tracking_events {
        bigint id PK
        bigint shipment_id FK
        varchar status
        text description
        varchar location
        timestamp event_time
    }

    shipping_zones ||--o{ shipping_methods : "offers"
    orders ||--o{ shipments : "shipped via"
    shipments ||--o{ shipment_items : "contains"
    shipments ||--o{ shipment_tracking_events : "tracked by"
        </div>
      </div>
    </div>

    <!-- â•â• SECTION 7: REVIEWS & RATINGS (RED) â•â• -->
    <div class="scard s7">
      <div class="shead">
        <div class="sbar"></div>
        <span class="snum">07</span>
        <span class="slabel">Reviews &amp; Ratings</span>
        <span class="stables">4 tables</span>
      </div>
      <div class="sbody">
        <div class="mermaid">
%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#200808','primaryBorderColor':'#f87171','primaryTextColor':'#fca5a5','lineColor':'#f87171','fontSize':'12px'}}}%%
erDiagram
    reviews {
        bigint id PK
        bigint product_id FK
        bigint user_id FK
        bigint order_id FK
        tinyint rating
        varchar title
        text review_text
        boolean is_verified_purchase
        enum status
        int helpful_count
        int unhelpful_count
        boolean has_vendor_response
        timestamp reviewed_at
    }
    review_images {
        bigint id PK
        bigint review_id FK
        varchar image_url
        varchar thumbnail_url
        int display_order
    }
    review_responses {
        bigint id PK
        bigint review_id FK
        text response_text
        bigint responder_id FK
        timestamp created_at
        timestamp updated_at
    }
    review_votes {
        bigint id PK
        bigint review_id FK
        bigint user_id FK
        enum vote
        timestamp created_at
    }

    products ||--o{ reviews : "receives"
    users ||--o{ reviews : "writes"
    reviews ||--o{ review_images : "has"
    reviews ||--o{ review_responses : "responded to"
    reviews ||--o{ review_votes : "voted"
        </div>
      </div>
    </div>

    <!-- â•â• SECTION 8: MARKETING & PROMOTIONS (TEAL) â•â• -->
    <div class="scard s8">
      <div class="shead">
        <div class="sbar"></div>
        <span class="snum">08</span>
        <span class="slabel">Marketing &amp; Promotions</span>
        <span class="stables">6 tables</span>
      </div>
      <div class="sbody">
        <div class="mermaid">
%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#071e1c','primaryBorderColor':'#2dd4bf','primaryTextColor':'#5eead4','lineColor':'#2dd4bf','fontSize':'12px'}}}%%
erDiagram
    coupons {
        bigint id PK
        bigint vendor_id FK
        varchar code UK
        varchar name
        text description
        enum discount_type
        decimal discount_value
        decimal max_discount_amount
        decimal min_order_amount
        int max_uses
        int uses_per_customer
        int times_used
        enum applicable_to
        enum customer_eligibility
        timestamp valid_from
        timestamp valid_until
        boolean is_active
        boolean show_on_store
        boolean auto_apply
    }
    coupon_products {
        bigint id PK
        bigint coupon_id FK
        bigint product_id FK
        boolean is_excluded
    }
    coupon_categories {
        bigint id PK
        bigint coupon_id FK
        bigint category_id FK
        boolean is_excluded
    }
    coupon_usage {
        bigint id PK
        bigint coupon_id FK
        bigint order_id FK
        bigint user_id FK
        decimal discount_amount
        timestamp used_at
    }
    promotions {
        bigint id PK
        bigint vendor_id FK
        varchar name
        varchar slug
        text description
        enum type
        decimal discount_value
        int buy_quantity
        int get_quantity
        decimal get_discount_percentage
        varchar banner_image_url
        varchar badge_text
        boolean show_countdown
        enum status
        timestamp starts_at
        timestamp ends_at
        int total_orders
        decimal total_revenue
    }
    promotion_products {
        bigint id PK
        bigint promotion_id FK
        bigint product_id FK
        decimal custom_discount
    }

    coupons ||--o{ coupon_products : "applies to"
    coupons ||--o{ coupon_categories : "applies to"
    coupons ||--o{ coupon_usage : "used in"
    promotions ||--o{ promotion_products : "includes"
        </div>
      </div>
    </div>

    <!-- â•â• SECTION 9: CONTENT MANAGEMENT (PURPLE) â•â• -->
    <div class="scard s9">
      <div class="shead">
        <div class="sbar"></div>
        <span class="snum">09</span>
        <span class="slabel">Content Management</span>
        <span class="stables">4 tables</span>
      </div>
      <div class="sbody">
        <div class="mermaid">
%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#180d25','primaryBorderColor':'#c084fc','primaryTextColor':'#d8b4fe','lineColor':'#c084fc','fontSize':'12px'}}}%%
erDiagram
    pages {
        bigint id PK
        varchar title
        varchar slug UK
        longtext content
        varchar meta_title
        text meta_description
        varchar meta_keywords
        varchar template
        boolean is_published
        boolean show_in_footer
        boolean show_in_header
        int display_order
        bigint created_by FK
        timestamp created_at
        timestamp updated_at
    }
    banners {
        bigint id PK
        varchar title
        varchar image_url
        varchar mobile_image_url
        varchar link_url
        varchar link_text
        boolean open_in_new_tab
        enum position
        int display_order
        boolean is_active
        timestamp starts_at
        timestamp ends_at
        int impression_count
        int click_count
    }
    blog_posts {
        bigint id PK
        varchar title
        varchar slug UK
        text excerpt
        longtext content
        varchar featured_image_url
        bigint author_id FK
        varchar category
        json tags
        varchar meta_title
        text meta_description
        enum status
        int view_count
        timestamp published_at
    }

    users ||--o{ pages : "creates"
    users ||--o{ blog_posts : "authors"
        </div>
      </div>
    </div>

    <!-- â•â• SECTION 10: SYSTEM & LOGS (SLATE) â•â• -->
    <div class="scard s10">
      <div class="shead">
        <div class="sbar"></div>
        <span class="snum">10</span>
        <span class="slabel">System &amp; Logs</span>
        <span class="stables">7 tables</span>
      </div>
      <div class="sbody">
        <div class="mermaid">
%%{init:{'theme':'dark','themeVariables':{'primaryColor':'#0f141c','primaryBorderColor':'#94a3b8','primaryTextColor':'#cbd5e1','lineColor':'#94a3b8','fontSize':'12px'}}}%%
erDiagram
    audit_logs {
        bigint id PK
        bigint user_id FK
        varchar user_email
        varchar user_type
        varchar action
        varchar entity_type
        bigint entity_id
        text description
        json old_values
        json new_values
        varchar ip_address
        text user_agent
        varchar url
        timestamp created_at
    }
    activity_logs {
        bigint id PK
        bigint user_id FK
        varchar activity_type
        text description
        json properties
        varchar ip_address
        text user_agent
        timestamp created_at
    }
    failed_jobs {
        bigint id PK
        varchar uuid UK
        text connection
        text queue
        longtext payload
        longtext exception
        timestamp failed_at
    }
    notifications {
        char id PK
        varchar type
        varchar notifiable_type
        bigint notifiable_id
        json data
        timestamp read_at
        timestamp created_at
    }
    email_logs {
        bigint id PK
        varchar to_email
        varchar from_email
        varchar subject
        longtext body
        varchar email_type
        varchar related_type
        bigint related_id
        enum status
        text error_message
        timestamp sent_at
        timestamp opened_at
        timestamp clicked_at
    }
    search_logs {
        bigint id PK
        bigint user_id FK
        varchar search_query
        int results_count
        json filters
        varchar ip_address
        timestamp created_at
    }
    migrations {
        int id PK
        varchar migration
        int batch
    }

    users ||--o{ audit_logs : "tracked"
    users ||--o{ activity_logs : "logs"
    users ||--o{ search_logs : "searches"
        </div>
      </div>
    </div>

  </div><!-- end .sections -->
</div><!-- end .wrapper -->

<script>
mermaid.initialize({
  startOnLoad: true,
  theme: 'dark',
  securityLevel: 'loose',
  er: {
    diagramPadding: 16,
    layoutDirection: 'TB',
    minEntityWidth: 100,
    minEntityHeight: 75,
    entityPadding: 12,
    useMaxWidth: true
  }
});
</script>
</body>
</html>