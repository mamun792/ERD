<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>E-Commerce ERD Â· Mahabubur Rahman (DD)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ROOT VARIABLES & RESET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --bg:        #060b14;
  --surface:   #0a1120;
  --card:      #0d1626;
  --card-h:    #111d35;
  --border:    #1a2a45;
  --border-h:  #2a4070;
  --text:      #cdd9f0;
  --muted:     #3d5578;
  --dim:       #1e3050;
  --mono: 'Fira Code', monospace;
  --sans: 'Plus Jakarta Sans', sans-serif;

  /* Section palette */
  --s1: #22d3ee;   /* cyan       - User & Auth        */
  --s2: #818cf8;   /* indigo     - Products           */
  --s3: #34d399;   /* emerald    - Orders             */
  --s4: #f97316;   /* orange     - Inventory          */
  --s5: #f472b6;   /* pink       - Vendors/Payments   */
  --s6: #fbbf24;   /* amber      - Shipping           */
  --s7: #fb7185;   /* rose       - Reviews            */
  --s8: #2dd4bf;   /* teal       - Marketing          */
  --s9: #a78bfa;   /* violet     - Content            */
  --s10:#64748b;   /* slate      - System/Logs        */
}

*,*::before,*::after { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--sans);
  min-height: 100vh;
  overflow-x: hidden;
  cursor: default;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ANIMATED BACKGROUND CANVAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
#bgCanvas {
  position: fixed; inset: 0;
  pointer-events: none; z-index: 0;
  opacity: 0.4;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HEADER â€” Cinematic entrance
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.header {
  position: relative; z-index: 10;
  padding: 2rem 2.5rem 1.5rem;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(34,211,238,0.04) 0%, transparent 100%);
  display: flex; align-items: center; gap: 2rem; flex-wrap: wrap;
  animation: slideDown 0.7s cubic-bezier(0.16,1,0.3,1) both;
}

@keyframes slideDown {
  from { opacity:0; transform: translateY(-24px); }
  to   { opacity:1; transform: translateY(0); }
}

.header-brand {
  display: flex; align-items: center; gap: 1rem;
}

.brand-icon {
  width: 44px; height: 44px;
  background: linear-gradient(135deg, var(--s1), var(--s2));
  border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.3rem;
  box-shadow: 0 0 20px rgba(34,211,238,0.3);
  flex-shrink: 0;
  animation: pulse-glow 3s ease-in-out infinite;
}

@keyframes pulse-glow {
  0%,100% { box-shadow: 0 0 20px rgba(34,211,238,0.3); }
  50%      { box-shadow: 0 0 35px rgba(34,211,238,0.6), 0 0 60px rgba(129,140,248,0.2); }
}

.header-title h1 {
  font-size: clamp(1.1rem, 2.5vw, 1.6rem);
  font-weight: 800;
  letter-spacing: -0.03em;
  background: linear-gradient(120deg, #e0f7ff 0%, var(--s1) 45%, var(--s2) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  line-height: 1.2;
}
.header-title p {
  font-family: var(--mono);
  font-size: 0.6rem;
  color: var(--muted);
  letter-spacing: 0.15em;
  text-transform: uppercase;
  margin-top: 0.25rem;
}

.header-stats {
  display: flex; gap: 0.6rem; flex-wrap: wrap; margin-left: auto;
}

.chip {
  font-family: var(--mono);
  font-size: 0.65rem;
  padding: 0.3rem 0.75rem;
  background: rgba(255,255,255,0.04);
  border: 1px solid var(--border);
  border-radius: 100px;
  color: var(--muted);
  white-space: nowrap;
  transition: all 0.2s;
}
.chip strong { color: var(--text); }
.chip:hover { border-color: var(--s1); color: var(--s1); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LEGEND STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.legend {
  position: relative; z-index: 10;
  background: rgba(10,17,32,0.95);
  border-bottom: 1px solid var(--border);
  padding: 0.75rem 2rem;
  display: flex; align-items: center; gap: 0.4rem; flex-wrap: wrap;
  animation: slideDown 0.7s 0.1s cubic-bezier(0.16,1,0.3,1) both;
  backdrop-filter: blur(10px);
}

.legend-label {
  font-family: var(--mono);
  font-size: 0.58rem;
  color: var(--muted);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  margin-right: 0.5rem;
  white-space: nowrap;
}

.ltag {
  display: flex; align-items: center; gap: 0.35rem;
  font-size: 0.68rem; font-weight: 600;
  padding: 0.22rem 0.65rem;
  border-radius: 5px;
  border: 1px solid transparent;
  cursor: pointer;
  transition: all 0.25s;
  white-space: nowrap;
}
.ltag:hover { transform: translateY(-2px) scale(1.04); }
.ltag .dot { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }

.lt1  { color:var(--s1);  border-color:rgba(34,211,238,0.2);  background:rgba(34,211,238,0.07); }
.lt2  { color:var(--s2);  border-color:rgba(129,140,248,0.2); background:rgba(129,140,248,0.07);}
.lt3  { color:var(--s3);  border-color:rgba(52,211,153,0.2);  background:rgba(52,211,153,0.07); }
.lt4  { color:var(--s4);  border-color:rgba(249,115,22,0.2);  background:rgba(249,115,22,0.07); }
.lt5  { color:var(--s5);  border-color:rgba(244,114,182,0.2); background:rgba(244,114,182,0.07);}
.lt6  { color:var(--s6);  border-color:rgba(251,191,36,0.2);  background:rgba(251,191,36,0.07); }
.lt7  { color:var(--s7);  border-color:rgba(251,113,133,0.2); background:rgba(251,113,133,0.07);}
.lt8  { color:var(--s8);  border-color:rgba(45,212,191,0.2);  background:rgba(45,212,191,0.07); }
.lt9  { color:var(--s9);  border-color:rgba(167,139,250,0.2); background:rgba(167,139,250,0.07);}
.lt10 { color:var(--s10); border-color:rgba(100,116,139,0.2); background:rgba(100,116,139,0.07);}

.legend-key {
  margin-left: auto;
  display: flex; gap: 0.75rem; align-items: center;
  font-family: var(--mono); font-size: 0.58rem; color: var(--muted);
}
.legend-key span { display: flex; align-items: center; gap: 0.3rem; }
.kbadge {
  font-size: 0.48rem; font-weight: 700;
  padding: 0.1rem 0.35rem;
  border-radius: 3px;
  font-family: var(--mono);
}
.kpk { background:rgba(251,191,36,0.2); color:#fbbf24; }
.kfk { background:rgba(129,140,248,0.2); color:#818cf8; }
.kuk { background:rgba(52,211,153,0.2);  color:#34d399; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CANVAS WRAPPER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.canvas-wrap {
  position: relative; z-index: 5;
  overflow: auto;
  cursor: grab;
  user-select: none;
  background: radial-gradient(ellipse 120% 80% at 50% 0%, rgba(34,211,238,0.02) 0%, transparent 60%);
}
.canvas-wrap:active { cursor: grabbing; }

.canvas {
  position: relative;
  width: 3400px;
  height: 2600px;
  transform-origin: 0 0;
}

/* SVG lines */
#svgLines {
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  pointer-events: none;
  overflow: visible;
}

/* Grid overlay */
.canvas::before {
  content: '';
  position: absolute; inset: 0;
  background-image:
    linear-gradient(rgba(34,211,238,0.025) 1px, transparent 1px),
    linear-gradient(90deg, rgba(34,211,238,0.025) 1px, transparent 1px);
  background-size: 60px 60px;
  pointer-events: none;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ENTITY CARDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.e {
  position: absolute;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  min-width: 188px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0,0,0,0.4), 0 0 0 0 transparent;
  transition: box-shadow 0.3s, border-color 0.3s, transform 0.25s;
  cursor: pointer;
  animation: cardIn 0.6s cubic-bezier(0.16,1,0.3,1) both;
}

@keyframes cardIn {
  from { opacity:0; transform: translateY(12px) scale(0.97); }
  to   { opacity:1; transform: translateY(0) scale(1); }
}

.e:hover {
  transform: translateY(-4px) scale(1.01);
  z-index: 999;
}

/* Section border-top + hover glow per color */
.e.s1  { border-top: 2.5px solid var(--s1);  } .e.s1:hover  { box-shadow: 0 12px 40px rgba(0,0,0,0.5), 0 0 20px rgba(34,211,238,0.2);  border-color: rgba(34,211,238,0.5); }
.e.s2  { border-top: 2.5px solid var(--s2);  } .e.s2:hover  { box-shadow: 0 12px 40px rgba(0,0,0,0.5), 0 0 20px rgba(129,140,248,0.2); border-color: rgba(129,140,248,0.5);}
.e.s3  { border-top: 2.5px solid var(--s3);  } .e.s3:hover  { box-shadow: 0 12px 40px rgba(0,0,0,0.5), 0 0 20px rgba(52,211,153,0.2);  border-color: rgba(52,211,153,0.5); }
.e.s4  { border-top: 2.5px solid var(--s4);  } .e.s4:hover  { box-shadow: 0 12px 40px rgba(0,0,0,0.5), 0 0 20px rgba(249,115,22,0.2);  border-color: rgba(249,115,22,0.5); }
.e.s5  { border-top: 2.5px solid var(--s5);  } .e.s5:hover  { box-shadow: 0 12px 40px rgba(0,0,0,0.5), 0 0 20px rgba(244,114,182,0.2); border-color: rgba(244,114,182,0.5);}
.e.s6  { border-top: 2.5px solid var(--s6);  } .e.s6:hover  { box-shadow: 0 12px 40px rgba(0,0,0,0.5), 0 0 20px rgba(251,191,36,0.2);  border-color: rgba(251,191,36,0.5); }
.e.s7  { border-top: 2.5px solid var(--s7);  } .e.s7:hover  { box-shadow: 0 12px 40px rgba(0,0,0,0.5), 0 0 20px rgba(251,113,133,0.2); border-color: rgba(251,113,133,0.5);}
.e.s8  { border-top: 2.5px solid var(--s8);  } .e.s8:hover  { box-shadow: 0 12px 40px rgba(0,0,0,0.5), 0 0 20px rgba(45,212,191,0.2);  border-color: rgba(45,212,191,0.5); }
.e.s9  { border-top: 2.5px solid var(--s9);  } .e.s9:hover  { box-shadow: 0 12px 40px rgba(0,0,0,0.5), 0 0 20px rgba(167,139,250,0.2); border-color: rgba(167,139,250,0.5);}
.e.s10 { border-top: 2.5px solid var(--s10); } .e.s10:hover { box-shadow: 0 12px 40px rgba(0,0,0,0.5), 0 0 20px rgba(100,116,139,0.2); border-color: rgba(100,116,139,0.5);}

/* Card header */
.eh {
  display: flex; align-items: center; gap: 0.45rem;
  padding: 0.5rem 0.8rem;
  border-bottom: 1px solid var(--border);
  font-size: 0.7rem; font-weight: 700;
  letter-spacing: 0.03em;
}
.s1  .eh { color:var(--s1);  background: rgba(34,211,238,0.06); }
.s2  .eh { color:var(--s2);  background: rgba(129,140,248,0.06); }
.s3  .eh { color:var(--s3);  background: rgba(52,211,153,0.06);  }
.s4  .eh { color:var(--s4);  background: rgba(249,115,22,0.06);  }
.s5  .eh { color:var(--s5);  background: rgba(244,114,182,0.06); }
.s6  .eh { color:var(--s6);  background: rgba(251,191,36,0.06);  }
.s7  .eh { color:var(--s7);  background: rgba(251,113,133,0.06); }
.s8  .eh { color:var(--s8);  background: rgba(45,212,191,0.06);  }
.s9  .eh { color:var(--s9);  background: rgba(167,139,250,0.06); }
.s10 .eh { color:var(--s10); background: rgba(100,116,139,0.06); }

.eh .edot { width: 6px; height: 6px; border-radius: 50%; flex-shrink:0; }
.eh .eico { font-size: 0.85rem; }

/* Fields */
.ef {
  padding: 0.45rem 0.8rem 0.5rem;
  display: flex; flex-direction: column; gap: 0.16rem;
}

.f {
  display: flex; align-items: center; gap: 0.35rem;
  font-family: var(--mono);
  font-size: 0.575rem;
  line-height: 1.5;
  color: #445e80;
  padding: 0.08rem 0;
  border-radius: 3px;
  transition: color 0.15s, background 0.15s;
}
.f:hover { color: #8fa8c8; background: rgba(255,255,255,0.025); padding-left: 3px; }

.f.pk  { color: #d4aa40; font-weight: 600; }
.f.fk  { color: #6872c8; }
.f.uk  { color: #3d9e77; }
.f.pk:hover { color: #f0c848; }
.f.fk:hover { color: #818cf8; }
.f.uk:hover { color: #34d399; }

.fb {
  font-size: 0.46rem; font-weight: 700;
  padding: 0.08rem 0.28rem;
  border-radius: 3px;
  letter-spacing: 0.06em;
  flex-shrink: 0;
  font-family: var(--mono);
}
.bpk { background:rgba(212,170,64,0.18);  color:#d4aa40; }
.bfk { background:rgba(104,114,200,0.18); color:#6872c8; }
.buk { background:rgba(61,158,119,0.18);  color:#3d9e77; }

.f-sep {
  height: 1px;
  background: var(--border);
  margin: 0.15rem 0;
  opacity: 0.6;
}

/* section title overlay */
.slabel {
  position: absolute;
  font-family: var(--mono);
  font-size: 0.55rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  opacity: 0.22;
  pointer-events: none;
  font-weight: 600;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONTROLS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.controls {
  position: fixed;
  bottom: 5rem; right: 1.5rem;
  z-index: 999;
  display: flex; flex-direction: column; gap: 0.4rem;
}

.cb {
  width: 38px; height: 38px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 10px;
  color: var(--text);
  font-size: 1rem;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s;
  font-family: var(--mono);
}
.cb:hover {
  background: var(--card-h);
  border-color: var(--s1);
  color: var(--s1);
  box-shadow: 0 0 12px rgba(34,211,238,0.2);
  transform: scale(1.1);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FOOTER â€” Credit
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.footer {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  z-index: 999;
  height: 48px;
  background: rgba(6,11,20,0.97);
  border-top: 1px solid var(--border);
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 2rem;
  backdrop-filter: blur(20px);
  animation: slideUp 0.7s 0.3s cubic-bezier(0.16,1,0.3,1) both;
}

@keyframes slideUp {
  from { opacity:0; transform: translateY(20px); }
  to   { opacity:1; transform: translateY(0); }
}

.footer-left {
  display: flex; align-items: center; gap: 0.75rem;
}

.footer-avatar {
  width: 28px; height: 28px;
  background: linear-gradient(135deg, var(--s1), var(--s5));
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.8rem;
  font-weight: 800;
  color: white;
  font-family: var(--mono);
  flex-shrink: 0;
  box-shadow: 0 0 10px rgba(34,211,238,0.3);
}

.footer-name {
  font-size: 0.78rem;
  font-weight: 700;
  color: var(--text);
}
.footer-name span {
  background: linear-gradient(90deg, var(--s1), var(--s5));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.footer-role {
  font-family: var(--mono);
  font-size: 0.6rem;
  color: var(--muted);
  margin-top: 0.05rem;
}

.footer-right {
  display: flex; align-items: center; gap: 1rem;
  font-family: var(--mono); font-size: 0.6rem; color: var(--muted);
}

.footer-tag {
  display: flex; align-items: center; gap: 0.35rem;
  padding: 0.2rem 0.6rem;
  background: rgba(255,255,255,0.03);
  border: 1px solid var(--border);
  border-radius: 5px;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ZOOM indicator
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.zoom-badge {
  position: fixed;
  bottom: 5rem; left: 1.5rem;
  z-index: 999;
  font-family: var(--mono);
  font-size: 0.62rem;
  color: var(--muted);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 7px;
  padding: 0.3rem 0.7rem;
}

/* Tooltip */
.tip {
  position: fixed;
  background: var(--card-h);
  border: 1px solid var(--border-h);
  border-radius: 8px;
  padding: 0.5rem 0.8rem;
  font-family: var(--mono);
  font-size: 0.62rem;
  color: var(--text);
  pointer-events: none;
  z-index: 9999;
  display: none;
  white-space: nowrap;
  box-shadow: 0 8px 24px rgba(0,0,0,0.5);
}
</style>
</head>
<body>

<!-- Animated BG -->
<canvas id="bgCanvas"></canvas>

<!-- â•â• HEADER â•â• -->
<div class="header">
  <div class="header-brand">
    <div class="brand-icon">â¬¡</div>
    <div class="header-title">
      <h1>E-Commerce Platform Â· Entity Relationship Diagram</h1>
      <p>MySQL 8.0+ Â· InnoDB Â· utf8mb4_unicode_ci Â· Complete Database Schema</p>
    </div>
  </div>
  <div class="header-stats">
    <div class="chip"><strong>65</strong> Tables</div>
    <div class="chip"><strong>10</strong> Domains</div>
    <div class="chip"><strong>3</strong> Views</div>
    <div class="chip"><strong>5</strong> Triggers</div>
    <div class="chip"><strong>2</strong> Procedures</div>
    <div class="chip">Scroll to Zoom Â· Drag to Pan</div>
  </div>
</div>

<!-- â•â• LEGEND â•â• -->
<div class="legend">
  <span class="legend-label">Domains â†’</span>
  <div class="ltag lt1"><div class="dot" style="background:var(--s1)"></div>01 User &amp; Auth</div>
  <div class="ltag lt2"><div class="dot" style="background:var(--s2)"></div>02 Products</div>
  <div class="ltag lt3"><div class="dot" style="background:var(--s3)"></div>03 Orders</div>
  <div class="ltag lt4"><div class="dot" style="background:var(--s4)"></div>04 Inventory</div>
  <div class="ltag lt5"><div class="dot" style="background:var(--s5)"></div>05 Vendors</div>
  <div class="ltag lt6"><div class="dot" style="background:var(--s6)"></div>06 Shipping</div>
  <div class="ltag lt7"><div class="dot" style="background:var(--s7)"></div>07 Reviews</div>
  <div class="ltag lt8"><div class="dot" style="background:var(--s8)"></div>08 Marketing</div>
  <div class="ltag lt9"><div class="dot" style="background:var(--s9)"></div>09 Content</div>
  <div class="ltag lt10"><div class="dot" style="background:var(--s10)"></div>10 System</div>
  <div class="legend-key">
    <span><span class="kbadge kpk">PK</span> Primary</span>
    <span><span class="kbadge kfk">FK</span> Foreign</span>
    <span><span class="kbadge kuk">UK</span> Unique</span>
    <span>â†’ One-to-Many &nbsp; â†” One-to-One</span>
  </div>
</div>

<!-- â•â• MAIN CANVAS â•â• -->
<div class="canvas-wrap" id="cWrap">
  <div class="canvas" id="canvas">
    <svg id="svgLines"></svg>

    <!-- â”€â”€â”€ S1: USER & AUTH â”€â”€â”€ -->
    <div class="slabel" style="left:30px;top:32px;color:var(--s1)">01 Â· User &amp; Authentication</div>

    <div class="e s1" id="users" style="left:310px;top:70px;min-width:205px;animation-delay:.05s">
      <div class="eh"><div class="edot" style="background:var(--s1)"></div><span class="eico">ğŸ‘¤</span> users</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT UNSIGNED</div>
        <div class="f uk"><span class="fb buk">UK</span> email VARCHAR(255)</div>
        <div class="f">email_verified_at TIMESTAMP</div>
        <div class="f">password VARCHAR(255)</div>
        <div class="f">first_name / last_name</div>
        <div class="f">phone VARCHAR(20)</div>
        <div class="f">avatar / date_of_birth</div>
        <div class="f-sep"></div>
        <div class="f">user_type ENUM</div>
        <div class="f">status ENUM</div>
        <div class="f">two_factor_enabled BOOL</div>
        <div class="f">last_login_at TIMESTAMP</div>
        <div class="f">failed_login_attempts INT</div>
        <div class="f">preferred_currency / timezone</div>
        <div class="f">created_at / deleted_at</div>
      </div>
    </div>

    <div class="e s1" id="user_roles" style="left:35px;top:70px;animation-delay:.08s">
      <div class="eh"><div class="edot" style="background:var(--s1)"></div><span class="eico">ğŸ”‘</span> user_roles</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id â†’ users</div>
        <div class="f fk"><span class="fb bfk">FK</span> role_id â†’ roles</div>
        <div class="f">created_at TIMESTAMP</div>
      </div>
    </div>

    <div class="e s1" id="roles" style="left:35px;top:255px;animation-delay:.1s">
      <div class="eh"><div class="edot" style="background:var(--s1)"></div><span class="eico">ğŸ­</span> roles</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f uk"><span class="fb buk">UK</span> name VARCHAR(50)</div>
        <div class="f">display_name VARCHAR</div>
        <div class="f">description TEXT</div>
      </div>
    </div>

    <div class="e s1" id="role_permissions" style="left:35px;top:415px;animation-delay:.12s">
      <div class="eh"><div class="edot" style="background:var(--s1)"></div><span class="eico">ğŸ›¡ï¸</span> role_permissions</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> role_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> permission_id</div>
      </div>
    </div>

    <div class="e s1" id="permissions" style="left:35px;top:555px;animation-delay:.14s">
      <div class="eh"><div class="edot" style="background:var(--s1)"></div><span class="eico">âœ…</span> permissions</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f uk"><span class="fb buk">UK</span> name VARCHAR(100)</div>
        <div class="f">display_name VARCHAR</div>
        <div class="f">module VARCHAR(50)</div>
      </div>
    </div>

    <div class="e s1" id="user_addresses" style="left:585px;top:70px;animation-delay:.16s">
      <div class="eh"><div class="edot" style="background:var(--s1)"></div><span class="eico">ğŸ“</span> user_addresses</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id â†’ users</div>
        <div class="f">address_type ENUM</div>
        <div class="f">full_name / phone</div>
        <div class="f">address_line1 / line2</div>
        <div class="f">city / state / postal_code</div>
        <div class="f">country / country_code</div>
        <div class="f">is_default BOOLEAN</div>
      </div>
    </div>

    <div class="e s1" id="user_sessions" style="left:585px;top:305px;animation-delay:.18s">
      <div class="eh"><div class="edot" style="background:var(--s1)"></div><span class="eico">ğŸ’»</span> user_sessions</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id â†’ users</div>
        <div class="f uk"><span class="fb buk">UK</span> session_token</div>
        <div class="f">ip_address / user_agent</div>
        <div class="f">device_type / browser / os</div>
        <div class="f">last_activity / expires_at</div>
      </div>
    </div>

    <div class="e s1" id="password_resets" style="left:585px;top:510px;animation-delay:.2s">
      <div class="eh"><div class="edot" style="background:var(--s1)"></div><span class="eico">ğŸ”</span> password_resets</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f">email VARCHAR(255)</div>
        <div class="f">token VARCHAR(255)</div>
        <div class="f">created_at / expires_at</div>
      </div>
    </div>

    <!-- â”€â”€â”€ S2: PRODUCTS â”€â”€â”€ -->
    <div class="slabel" style="left:850px;top:32px;color:var(--s2)">02 Â· Products &amp; Catalog</div>

    <div class="e s2" id="categories" style="left:860px;top:70px;animation-delay:.22s">
      <div class="eh"><div class="edot" style="background:var(--s2)"></div><span class="eico">ğŸ“‚</span> categories</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> parent_id (self-ref)</div>
        <div class="f uk"><span class="fb buk">UK</span> slug VARCHAR</div>
        <div class="f">name / description</div>
        <div class="f">icon / image_url</div>
        <div class="f">display_order INT</div>
        <div class="f">is_active / product_count</div>
      </div>
    </div>

    <div class="e s2" id="category_attributes" style="left:860px;top:315px;animation-delay:.24s">
      <div class="eh"><div class="edot" style="background:var(--s2)"></div><span class="eico">ğŸ”—</span> category_attributes</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> category_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> attribute_id</div>
        <div class="f">is_required / display_order</div>
      </div>
    </div>

    <div class="e s2" id="attributes" style="left:1100px;top:315px;animation-delay:.26s">
      <div class="eh"><div class="edot" style="background:var(--s2)"></div><span class="eico">âš™ï¸</span> attributes</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f uk"><span class="fb buk">UK</span> slug VARCHAR</div>
        <div class="f">name / type ENUM</div>
        <div class="f">is_global / is_visible</div>
        <div class="f">is_filterable / is_required</div>
      </div>
    </div>

    <div class="e s2" id="attribute_values" style="left:1100px;top:510px;animation-delay:.28s">
      <div class="eh"><div class="edot" style="background:var(--s2)"></div><span class="eico">ğŸ¨</span> attribute_values</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> attribute_id</div>
        <div class="f">value / display_value</div>
        <div class="f">color_code VARCHAR(7)</div>
        <div class="f">display_order INT</div>
      </div>
    </div>

    <div class="e s2" id="products" style="left:1100px;top:70px;min-width:210px;animation-delay:.3s">
      <div class="eh"><div class="edot" style="background:var(--s2)"></div><span class="eico">ğŸ“¦</span> products</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> vendor_id â†’ vendors</div>
        <div class="f fk"><span class="fb bfk">FK</span> category_id â†’ categories</div>
        <div class="f uk"><span class="fb buk">UK</span> sku VARCHAR(100)</div>
        <div class="f">name / slug / barcode</div>
        <div class="f-sep"></div>
        <div class="f">price / sale_price DECIMAL</div>
        <div class="f">cost_price / sale_dates</div>
        <div class="f">stock_quantity INT</div>
        <div class="f">low_stock_threshold INT</div>
        <div class="f">track_inventory / backorders</div>
        <div class="f-sep"></div>
        <div class="f">weight / length / width / height</div>
        <div class="f">type ENUM (simple/variable)</div>
        <div class="f">status / visibility ENUM</div>
        <div class="f">is_featured / allow_reviews</div>
        <div class="f-sep"></div>
        <div class="f">rating_average / rating_count</div>
        <div class="f">view_count / sale_count</div>
        <div class="f">published_at / deleted_at</div>
      </div>
    </div>

    <div class="e s2" id="product_images" style="left:1375px;top:70px;animation-delay:.32s">
      <div class="eh"><div class="edot" style="background:var(--s2)"></div><span class="eico">ğŸ–¼ï¸</span> product_images</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f">image_url / thumbnail_url</div>
        <div class="f">alt_text VARCHAR</div>
        <div class="f">is_primary / display_order</div>
      </div>
    </div>

    <div class="e s2" id="product_variants" style="left:1375px;top:280px;animation-delay:.34s">
      <div class="eh"><div class="edot" style="background:var(--s2)"></div><span class="eico">ğŸ”€</span> product_variants</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f uk"><span class="fb buk">UK</span> sku VARCHAR</div>
        <div class="f">variant_name VARCHAR</div>
        <div class="f">price / sale_price</div>
        <div class="f">stock_quantity INT</div>
        <div class="f">weight / image_url</div>
        <div class="f">is_active BOOLEAN</div>
      </div>
    </div>

    <div class="e s2" id="product_variant_attributes" style="left:1375px;top:510px;animation-delay:.36s">
      <div class="eh"><div class="edot" style="background:var(--s2)"></div><span class="eico">ğŸ·ï¸</span> pv_attributes</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> variant_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> attribute_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> attribute_value_id</div>
      </div>
    </div>

    <div class="e s2" id="product_attributes" style="left:1375px;top:680px;animation-delay:.38s">
      <div class="eh"><div class="edot" style="background:var(--s2)"></div><span class="eico">ğŸ“‹</span> product_attributes</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> attribute_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> attribute_value_id</div>
        <div class="f">custom_value TEXT</div>
      </div>
    </div>

    <!-- â”€â”€â”€ S3: ORDERS â”€â”€â”€ -->
    <div class="slabel" style="left:1680px;top:32px;color:var(--s3)">03 Â· Orders &amp; Transactions</div>

    <div class="e s3" id="orders" style="left:1690px;top:70px;min-width:210px;animation-delay:.4s">
      <div class="eh"><div class="edot" style="background:var(--s3)"></div><span class="eico">ğŸ›’</span> orders</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f uk"><span class="fb buk">UK</span> order_number VARCHAR</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id (NULL=guest)</div>
        <div class="f">guest_email VARCHAR</div>
        <div class="f fk"><span class="fb bfk">FK</span> shipping_address_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> billing_address_id</div>
        <div class="f-sep"></div>
        <div class="f">subtotal / discount / shipping</div>
        <div class="f">tax_amount / total_amount</div>
        <div class="f">currency / exchange_rate</div>
        <div class="f">coupon_code / coupon_discount</div>
        <div class="f-sep"></div>
        <div class="f">status ENUM (8 states)</div>
        <div class="f">payment_status ENUM</div>
        <div class="f">fulfillment_status ENUM</div>
        <div class="f">payment_method / gateway</div>
        <div class="f">transaction_id VARCHAR</div>
        <div class="f-sep"></div>
        <div class="f">paid_at / shipped_at</div>
        <div class="f">delivered_at / cancelled_at</div>
      </div>
    </div>

    <div class="e s3" id="order_addresses" style="left:1670px;top:480px;animation-delay:.42s">
      <div class="eh"><div class="edot" style="background:var(--s3)"></div><span class="eico">ğŸ“®</span> order_addresses</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f">full_name / email / phone</div>
        <div class="f">address_line1 / line2</div>
        <div class="f">city / state / postal_code</div>
        <div class="f">country / country_code</div>
      </div>
    </div>

    <div class="e s3" id="order_items" style="left:1970px;top:70px;min-width:205px;animation-delay:.44s">
      <div class="eh"><div class="edot" style="background:var(--s3)"></div><span class="eico">ğŸ§¾</span> order_items</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> variant_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> vendor_id</div>
        <div class="f-sep"></div>
        <div class="f">product_name / sku (snapshot)</div>
        <div class="f">unit_price / quantity</div>
        <div class="f">subtotal / discount / tax</div>
        <div class="f">total DECIMAL</div>
        <div class="f-sep"></div>
        <div class="f">commission_rate DECIMAL</div>
        <div class="f">commission_amount DECIMAL</div>
        <div class="f">vendor_earnings DECIMAL</div>
        <div class="f">product_attributes JSON</div>
      </div>
    </div>

    <div class="e s3" id="order_status_history" style="left:1970px;top:395px;animation-delay:.46s">
      <div class="eh"><div class="edot" style="background:var(--s3)"></div><span class="eico">ğŸ“Š</span> order_status_history</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_id</div>
        <div class="f">old_status / new_status</div>
        <div class="f">comment TEXT</div>
        <div class="f fk"><span class="fb bfk">FK</span> changed_by â†’ users</div>
      </div>
    </div>

    <div class="e s3" id="order_notes" style="left:1970px;top:575px;animation-delay:.48s">
      <div class="eh"><div class="edot" style="background:var(--s3)"></div><span class="eico">ğŸ“</span> order_notes</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_id</div>
        <div class="f">note TEXT</div>
        <div class="f">is_customer_note BOOL</div>
        <div class="f fk"><span class="fb bfk">FK</span> created_by â†’ users</div>
      </div>
    </div>

    <div class="e s3" id="refunds" style="left:1670px;top:700px;animation-delay:.5s">
      <div class="eh"><div class="edot" style="background:var(--s3)"></div><span class="eico">ğŸ’¸</span> refunds</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_id</div>
        <div class="f uk"><span class="fb buk">UK</span> refund_number</div>
        <div class="f">refund_amount DECIMAL</div>
        <div class="f">reason ENUM / reason_details</div>
        <div class="f">status / refund_method ENUM</div>
        <div class="f fk"><span class="fb bfk">FK</span> processed_by â†’ users</div>
      </div>
    </div>

    <div class="e s3" id="refund_items" style="left:1970px;top:780px;animation-delay:.52s">
      <div class="eh"><div class="edot" style="background:var(--s3)"></div><span class="eico">ğŸ“‹</span> refund_items</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> refund_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_item_id</div>
        <div class="f">quantity INT</div>
        <div class="f">refund_amount DECIMAL</div>
      </div>
    </div>

    <div class="e s3" id="transactions_t" style="left:1670px;top:960px;animation-delay:.54s">
      <div class="eh"><div class="edot" style="background:var(--s3)"></div><span class="eico">ğŸ’³</span> transactions</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_id</div>
        <div class="f uk"><span class="fb buk">UK</span> transaction_id</div>
        <div class="f">type ENUM / amount / currency</div>
        <div class="f">payment_gateway VARCHAR</div>
        <div class="f">gateway_response JSON</div>
        <div class="f">status / error_code</div>
        <div class="f">processed_at TIMESTAMP</div>
      </div>
    </div>

    <div class="e s3" id="abandoned_carts" style="left:1970px;top:1000px;animation-delay:.56s">
      <div class="eh"><div class="edot" style="background:var(--s3)"></div><span class="eico">ğŸ›ï¸</span> abandoned_carts</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id</div>
        <div class="f">session_id / email</div>
        <div class="f">cart_data JSON</div>
        <div class="f">total_amount DECIMAL</div>
        <div class="f">recovered BOOL</div>
        <div class="f">reminder_sent_count INT</div>
      </div>
    </div>

    <div class="e s3" id="wishlists" style="left:1670px;top:1175px;animation-delay:.58s">
      <div class="eh"><div class="edot" style="background:var(--s3)"></div><span class="eico">â¤ï¸</span> wishlists</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> variant_id</div>
        <div class="f">added_at TIMESTAMP</div>
      </div>
    </div>

    <!-- â”€â”€â”€ S4: INVENTORY â”€â”€â”€ -->
    <div class="slabel" style="left:850px;top:830px;color:var(--s4)">04 Â· Inventory &amp; Stock</div>

    <div class="e s4" id="inventory_logs" style="left:860px;top:870px;animation-delay:.6s">
      <div class="eh"><div class="edot" style="background:var(--s4)"></div><span class="eico">ğŸ“ˆ</span> inventory_logs</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> variant_id</div>
        <div class="f">type ENUM (7 types)</div>
        <div class="f">quantity_before INT</div>
        <div class="f">quantity_change INT</div>
        <div class="f">quantity_after INT</div>
        <div class="f">reference_type / reference_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> created_by â†’ users</div>
      </div>
    </div>

    <div class="e s4" id="stock_alerts" style="left:1100px;top:870px;animation-delay:.62s">
      <div class="eh"><div class="edot" style="background:var(--s4)"></div><span class="eico">ğŸ””</span> stock_alerts</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> variant_id</div>
        <div class="f">alert_type ENUM</div>
        <div class="f">current_qty / threshold_qty</div>
        <div class="f">is_resolved / resolved_at</div>
      </div>
    </div>

    <div class="e s4" id="warehouses" style="left:860px;top:1100px;animation-delay:.64s">
      <div class="eh"><div class="edot" style="background:var(--s4)"></div><span class="eico">ğŸ­</span> warehouses</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> vendor_id â†’ vendors</div>
        <div class="f uk"><span class="fb buk">UK</span> code VARCHAR(50)</div>
        <div class="f">name VARCHAR</div>
        <div class="f">address / city / country</div>
        <div class="f">contact_person / phone</div>
        <div class="f">is_active / is_primary</div>
      </div>
    </div>

    <div class="e s4" id="warehouse_inventory" style="left:1100px;top:1100px;animation-delay:.66s">
      <div class="eh"><div class="edot" style="background:var(--s4)"></div><span class="eico">ğŸ“¦</span> warehouse_inventory</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> warehouse_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> variant_id</div>
        <div class="f">quantity INT</div>
        <div class="f">reserved_quantity INT</div>
        <div class="f">available_qty (computed)</div>
        <div class="f">last_counted_at TIMESTAMP</div>
      </div>
    </div>

    <div class="e s4" id="inventory_reservations" style="left:860px;top:1345px;animation-delay:.68s">
      <div class="eh"><div class="edot" style="background:var(--s4)"></div><span class="eico">ğŸ”’</span> inventory_reservations</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_item_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f">quantity / status ENUM</div>
        <div class="f">expires_at / released_at</div>
      </div>
    </div>

    <div class="e s4" id="stock_transfers" style="left:1100px;top:1345px;animation-delay:.7s">
      <div class="eh"><div class="edot" style="background:var(--s4)"></div><span class="eico">â†”ï¸</span> stock_transfers</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f uk"><span class="fb buk">UK</span> transfer_number</div>
        <div class="f fk"><span class="fb bfk">FK</span> from_warehouse_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> to_warehouse_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f">quantity / status ENUM</div>
        <div class="f fk"><span class="fb bfk">FK</span> transferred_by / received_by</div>
      </div>
    </div>

    <!-- â”€â”€â”€ S5: VENDORS â”€â”€â”€ -->
    <div class="slabel" style="left:30px;top:830px;color:var(--s5)">05 Â· Vendors &amp; Payments</div>

    <div class="e s5" id="vendors" style="left:35px;top:870px;min-width:210px;animation-delay:.72s">
      <div class="eh"><div class="edot" style="background:var(--s5)"></div><span class="eico">ğŸª</span> vendors</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id (1:1)</div>
        <div class="f uk"><span class="fb buk">UK</span> store_slug VARCHAR</div>
        <div class="f">store_name / store_email</div>
        <div class="f-sep"></div>
        <div class="f">business_name / type ENUM</div>
        <div class="f">tax_id / registration_number</div>
        <div class="f">commission_rate DECIMAL</div>
        <div class="f-sep"></div>
        <div class="f">status ENUM / verified BOOL</div>
        <div class="f">verified_at TIMESTAMP</div>
        <div class="f">logo_url / banner_url</div>
        <div class="f">primary_color / secondary_color</div>
        <div class="f-sep"></div>
        <div class="f">total_sales / total_orders</div>
        <div class="f">average_rating DECIMAL</div>
        <div class="f">website / social media URLs</div>
      </div>
    </div>

    <div class="e s5" id="vendor_bank_accounts" style="left:35px;top:1200px;animation-delay:.74s">
      <div class="eh"><div class="edot" style="background:var(--s5)"></div><span class="eico">ğŸ¦</span> vendor_bank_accounts</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> vendor_id</div>
        <div class="f">account_holder_name</div>
        <div class="f">bank_name / account_number</div>
        <div class="f">routing_number (encrypted)</div>
        <div class="f">account_type ENUM</div>
        <div class="f">swift_code / iban</div>
        <div class="f">is_verified / is_default</div>
      </div>
    </div>

    <div class="e s5" id="vendor_payouts" style="left:35px;top:1470px;animation-delay:.76s">
      <div class="eh"><div class="edot" style="background:var(--s5)"></div><span class="eico">ğŸ’°</span> vendor_payouts</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> vendor_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> bank_account_id</div>
        <div class="f uk"><span class="fb buk">UK</span> payout_reference</div>
        <div class="f">gross / commission / net</div>
        <div class="f">gateway_fee / adjustments</div>
        <div class="f">period_from / period_to DATE</div>
        <div class="f">status / payment_method ENUM</div>
        <div class="f">requested_at / processed_at</div>
      </div>
    </div>

    <!-- â”€â”€â”€ S6: SHIPPING â”€â”€â”€ -->
    <div class="slabel" style="left:2280px;top:32px;color:var(--s6)">06 Â· Shipping &amp; Fulfillment</div>

    <div class="e s6" id="shipping_zones" style="left:2285px;top:70px;animation-delay:.78s">
      <div class="eh"><div class="edot" style="background:var(--s6)"></div><span class="eico">ğŸŒ</span> shipping_zones</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> vendor_id (NULL=platform)</div>
        <div class="f">name VARCHAR</div>
        <div class="f">countries JSON (ISO codes)</div>
        <div class="f">is_active BOOLEAN</div>
      </div>
    </div>

    <div class="e s6" id="shipping_methods" style="left:2285px;top:260px;animation-delay:.8s">
      <div class="eh"><div class="edot" style="background:var(--s6)"></div><span class="eico">ğŸšš</span> shipping_methods</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> shipping_zone_id</div>
        <div class="f">name / description</div>
        <div class="f">rate_type ENUM</div>
        <div class="f">flat_rate / rate_per_kg</div>
        <div class="f">free_shipping_threshold</div>
        <div class="f">min / max delivery_days</div>
        <div class="f">is_active / display_order</div>
      </div>
    </div>

    <div class="e s6" id="shipments" style="left:2285px;top:510px;animation-delay:.82s">
      <div class="eh"><div class="edot" style="background:var(--s6)"></div><span class="eico">ğŸ“¬</span> shipments</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_id â†’ orders</div>
        <div class="f uk"><span class="fb buk">UK</span> shipment_number</div>
        <div class="f">carrier / tracking_number</div>
        <div class="f">tracking_url VARCHAR</div>
        <div class="f">shipping_method VARCHAR</div>
        <div class="f">status ENUM (8 states)</div>
        <div class="f">weight / dimensions DECIMAL</div>
        <div class="f">shipping_cost DECIMAL</div>
        <div class="f">shipped_at / delivered_at</div>
      </div>
    </div>

    <div class="e s6" id="shipment_items" style="left:2285px;top:790px;animation-delay:.84s">
      <div class="eh"><div class="edot" style="background:var(--s6)"></div><span class="eico">ğŸ“¦</span> shipment_items</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> shipment_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_item_id</div>
        <div class="f">quantity INT UNSIGNED</div>
      </div>
    </div>

    <div class="e s6" id="shipment_tracking_events" style="left:2285px;top:960px;animation-delay:.86s">
      <div class="eh"><div class="edot" style="background:var(--s6)"></div><span class="eico">ğŸ“¡</span> tracking_events</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> shipment_id</div>
        <div class="f">status VARCHAR(100)</div>
        <div class="f">description TEXT</div>
        <div class="f">location VARCHAR</div>
        <div class="f">event_time TIMESTAMP</div>
      </div>
    </div>

    <!-- â”€â”€â”€ S7: REVIEWS â”€â”€â”€ -->
    <div class="slabel" style="left:2580px;top:32px;color:var(--s7)">07 Â· Reviews &amp; Ratings</div>

    <div class="e s7" id="reviews" style="left:2590px;top:70px;animation-delay:.88s">
      <div class="eh"><div class="edot" style="background:var(--s7)"></div><span class="eico">â­</span> reviews</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_id (verified purchase)</div>
        <div class="f">rating TINYINT (1â€“5)</div>
        <div class="f">title / review_text TEXT</div>
        <div class="f">is_verified_purchase BOOL</div>
        <div class="f">status ENUM</div>
        <div class="f">helpful_count / unhelpful_count</div>
        <div class="f">has_vendor_response BOOL</div>
        <div class="f">reviewed_at TIMESTAMP</div>
      </div>
    </div>

    <div class="e s7" id="review_images" style="left:2590px;top:385px;animation-delay:.9s">
      <div class="eh"><div class="edot" style="background:var(--s7)"></div><span class="eico">ğŸ–¼ï¸</span> review_images</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> review_id</div>
        <div class="f">image_url / thumbnail_url</div>
        <div class="f">display_order INT</div>
      </div>
    </div>

    <div class="e s7" id="review_responses" style="left:2590px;top:545px;animation-delay:.92s">
      <div class="eh"><div class="edot" style="background:var(--s7)"></div><span class="eico">ğŸ’¬</span> review_responses</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> review_id</div>
        <div class="f">response_text TEXT</div>
        <div class="f fk"><span class="fb bfk">FK</span> responder_id â†’ users</div>
        <div class="f">created_at / updated_at</div>
      </div>
    </div>

    <div class="e s7" id="review_votes" style="left:2590px;top:715px;animation-delay:.94s">
      <div class="eh"><div class="edot" style="background:var(--s7)"></div><span class="eico">ğŸ‘</span> review_votes</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> review_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id</div>
        <div class="f">vote ENUM (helpful/unhelpful)</div>
      </div>
    </div>

    <!-- â”€â”€â”€ S8: MARKETING â”€â”€â”€ -->
    <div class="slabel" style="left:2590px;top:870px;color:var(--s8)">08 Â· Marketing &amp; Promotions</div>

    <div class="e s8" id="coupons" style="left:2590px;top:910px;animation-delay:.96s">
      <div class="eh"><div class="edot" style="background:var(--s8)"></div><span class="eico">ğŸŸï¸</span> coupons</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> vendor_id (NULL=platform)</div>
        <div class="f uk"><span class="fb buk">UK</span> code VARCHAR(50)</div>
        <div class="f">name / description</div>
        <div class="f">discount_type ENUM</div>
        <div class="f">discount_value / max_discount</div>
        <div class="f">min_order_amount DECIMAL</div>
        <div class="f">max_uses / times_used INT</div>
        <div class="f">applicable_to ENUM</div>
        <div class="f">valid_from / valid_until</div>
        <div class="f">is_active / auto_apply</div>
      </div>
    </div>

    <div class="e s8" id="coupon_products" style="left:2860px;top:910px;animation-delay:.98s">
      <div class="eh"><div class="edot" style="background:var(--s8)"></div><span class="eico">ğŸ”—</span> coupon_products</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> coupon_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f">is_excluded BOOLEAN</div>
      </div>
    </div>

    <div class="e s8" id="coupon_categories" style="left:2860px;top:1075px;animation-delay:1s">
      <div class="eh"><div class="edot" style="background:var(--s8)"></div><span class="eico">ğŸ”—</span> coupon_categories</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> coupon_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> category_id</div>
        <div class="f">is_excluded BOOLEAN</div>
      </div>
    </div>

    <div class="e s8" id="coupon_usage" style="left:2590px;top:1210px;animation-delay:1.02s">
      <div class="eh"><div class="edot" style="background:var(--s8)"></div><span class="eico">ğŸ“Š</span> coupon_usage</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> coupon_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id</div>
        <div class="f">discount_amount DECIMAL</div>
        <div class="f">used_at TIMESTAMP</div>
      </div>
    </div>

    <div class="e s8" id="promotions" style="left:2590px;top:1410px;animation-delay:1.04s">
      <div class="eh"><div class="edot" style="background:var(--s8)"></div><span class="eico">ğŸ¯</span> promotions</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> vendor_id</div>
        <div class="f">name / slug / description</div>
        <div class="f">type ENUM (5 types)</div>
        <div class="f">discount_value DECIMAL</div>
        <div class="f">buy_qty / get_qty (BOGO)</div>
        <div class="f">badge_text / banner_image</div>
        <div class="f">status ENUM</div>
        <div class="f">starts_at / ends_at</div>
        <div class="f">total_orders / total_revenue</div>
      </div>
    </div>

    <div class="e s8" id="promotion_products" style="left:2860px;top:1410px;animation-delay:1.06s">
      <div class="eh"><div class="edot" style="background:var(--s8)"></div><span class="eico">ğŸ”—</span> promotion_products</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> promotion_id</div>
        <div class="f fk"><span class="fb bfk">FK</span> product_id</div>
        <div class="f">custom_discount DECIMAL</div>
      </div>
    </div>

    <!-- â”€â”€â”€ S9: CONTENT â”€â”€â”€ -->
    <div class="slabel" style="left:30px;top:1700px;color:var(--s9)">09 Â· Content Management</div>

    <div class="e s9" id="pages" style="left:35px;top:1740px;animation-delay:1.08s">
      <div class="eh"><div class="edot" style="background:var(--s9)"></div><span class="eico">ğŸ“„</span> pages</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f uk"><span class="fb buk">UK</span> slug VARCHAR(255)</div>
        <div class="f">title / content LONGTEXT</div>
        <div class="f">meta_title / meta_description</div>
        <div class="f">template / is_published</div>
        <div class="f">show_in_footer / show_in_header</div>
        <div class="f fk"><span class="fb bfk">FK</span> created_by â†’ users</div>
      </div>
    </div>

    <div class="e s9" id="banners" style="left:285px;top:1740px;animation-delay:1.1s">
      <div class="eh"><div class="edot" style="background:var(--s9)"></div><span class="eico">ğŸ–¼ï¸</span> banners</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f">title / image_url</div>
        <div class="f">mobile_image_url</div>
        <div class="f">link_url / link_text</div>
        <div class="f">position ENUM</div>
        <div class="f">is_active / display_order</div>
        <div class="f">starts_at / ends_at</div>
        <div class="f">impression_count / click_count</div>
      </div>
    </div>

    <div class="e s9" id="blog_posts" style="left:535px;top:1740px;animation-delay:1.12s">
      <div class="eh"><div class="edot" style="background:var(--s9)"></div><span class="eico">âœï¸</span> blog_posts</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f uk"><span class="fb buk">UK</span> slug VARCHAR</div>
        <div class="f fk"><span class="fb bfk">FK</span> author_id â†’ users</div>
        <div class="f">title / excerpt / content</div>
        <div class="f">featured_image_url</div>
        <div class="f">category / tags JSON</div>
        <div class="f">status ENUM</div>
        <div class="f">view_count / published_at</div>
      </div>
    </div>

    <!-- â”€â”€â”€ S10: SYSTEM/LOGS â”€â”€â”€ -->
    <div class="slabel" style="left:800px;top:1700px;color:var(--s10)">10 Â· System &amp; Logs</div>

    <div class="e s10" id="audit_logs" style="left:810px;top:1740px;animation-delay:1.14s">
      <div class="eh"><div class="edot" style="background:var(--s10)"></div><span class="eico">ğŸ“‹</span> audit_logs</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id</div>
        <div class="f">user_email / user_type</div>
        <div class="f">action / entity_type</div>
        <div class="f">entity_id BIGINT</div>
        <div class="f">old_values / new_values JSON</div>
        <div class="f">ip_address / url / user_agent</div>
      </div>
    </div>

    <div class="e s10" id="activity_logs" style="left:1060px;top:1740px;animation-delay:1.16s">
      <div class="eh"><div class="edot" style="background:var(--s10)"></div><span class="eico">ğŸ“Š</span> activity_logs</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id</div>
        <div class="f">activity_type VARCHAR</div>
        <div class="f">description / properties JSON</div>
        <div class="f">ip_address / user_agent</div>
      </div>
    </div>

    <div class="e s10" id="notifications" style="left:1300px;top:1740px;animation-delay:1.18s">
      <div class="eh"><div class="edot" style="background:var(--s10)"></div><span class="eico">ğŸ””</span> notifications</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id CHAR(36) UUID</div>
        <div class="f">type / notifiable_type</div>
        <div class="f">notifiable_id BIGINT</div>
        <div class="f">data JSON</div>
        <div class="f">read_at TIMESTAMP</div>
      </div>
    </div>

    <div class="e s10" id="email_logs" style="left:1530px;top:1740px;animation-delay:1.2s">
      <div class="eh"><div class="edot" style="background:var(--s10)"></div><span class="eico">ğŸ“§</span> email_logs</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f">to_email / from_email</div>
        <div class="f">subject VARCHAR(500)</div>
        <div class="f">email_type VARCHAR</div>
        <div class="f">status ENUM</div>
        <div class="f">sent_at / opened_at / clicked_at</div>
      </div>
    </div>

    <div class="e s10" id="search_logs" style="left:1775px;top:1740px;animation-delay:1.22s">
      <div class="eh"><div class="edot" style="background:var(--s10)"></div><span class="eico">ğŸ”</span> search_logs</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> user_id</div>
        <div class="f">search_query VARCHAR</div>
        <div class="f">results_count INT</div>
        <div class="f">filters JSON / ip_address</div>
      </div>
    </div>

    <div class="e s10" id="fraud_checks" style="left:2020px;top:1740px;animation-delay:1.24s">
      <div class="eh"><div class="edot" style="background:var(--s10)"></div><span class="eico">ğŸ›¡ï¸</span> fraud_checks</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f fk"><span class="fb bfk">FK</span> order_id</div>
        <div class="f">risk_score INT (0â€“100)</div>
        <div class="f">risk_level ENUM</div>
        <div class="f">checks_performed JSON</div>
        <div class="f">decision ENUM</div>
        <div class="f fk"><span class="fb bfk">FK</span> reviewed_by â†’ users</div>
      </div>
    </div>

    <div class="e s10" id="ip_blocks" style="left:2265px;top:1740px;animation-delay:1.26s">
      <div class="eh"><div class="edot" style="background:var(--s10)"></div><span class="eico">ğŸš«</span> ip_blocks</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f uk"><span class="fb buk">UK</span> ip_address VARCHAR</div>
        <div class="f">reason TEXT</div>
        <div class="f">block_type ENUM</div>
        <div class="f">is_active / expires_at</div>
        <div class="f fk"><span class="fb bfk">FK</span> blocked_by â†’ users</div>
      </div>
    </div>

    <div class="e s10" id="settings" style="left:2510px;top:1740px;animation-delay:1.28s">
      <div class="eh"><div class="edot" style="background:var(--s10)"></div><span class="eico">âš™ï¸</span> settings</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f uk"><span class="fb buk">UK</span> key VARCHAR(255)</div>
        <div class="f">value LONGTEXT</div>
        <div class="f">type ENUM</div>
        <div class="f">group VARCHAR / description</div>
      </div>
    </div>

    <div class="e s10" id="failed_jobs" style="left:2755px;top:1740px;animation-delay:1.3s">
      <div class="eh"><div class="edot" style="background:var(--s10)"></div><span class="eico">âŒ</span> failed_jobs</div>
      <div class="ef">
        <div class="f pk"><span class="fb bpk">PK</span> id BIGINT</div>
        <div class="f uk"><span class="fb buk">UK</span> uuid VARCHAR</div>
        <div class="f">connection / queue TEXT</div>
        <div class="f">payload / exception LONGTEXT</div>
        <div class="f">failed_at TIMESTAMP</div>
      </div>
    </div>

  </div><!-- /canvas -->
</div><!-- /canvas-wrap -->

<!-- Controls -->
<div class="controls">
  <button class="cb" id="zIn" title="Zoom In">+</button>
  <button class="cb" id="zOut" title="Zoom Out">âˆ’</button>
  <button class="cb" id="zReset" title="Reset View">âŒ‚</button>
</div>

<div class="zoom-badge" id="zBadge">55%</div>
<div class="tip" id="tip"></div>

<!-- Footer -->
<div class="footer">
  <div class="footer-left">
    <div class="footer-avatar">DD</div>
    <div>
      <div class="footer-name">Designed by <span>Mahabubur Rahman (DD)</span></div>
      <div class="footer-role">Junior Software Engineer</div>
    </div>
  </div>
  <div class="footer-right">
    <div class="footer-tag">â¬¡ E-Commerce Platform ERD</div>
    <div class="footer-tag">65 Tables Â· 10 Domains</div>
    <div class="footer-tag">MySQL 8.0+ Â· InnoDB</div>
  </div>
</div>

<script>
/* â”€â”€â”€ ANIMATED BACKGROUND PARTICLES â”€â”€â”€ */
const bgCvs = document.getElementById('bgCanvas');
const bgCtx = bgCvs.getContext('2d');
let W, H, pts = [];

function initBg() {
  W = bgCvs.width  = window.innerWidth;
  H = bgCvs.height = window.innerHeight;
  pts = [];
  const n = Math.floor((W * H) / 18000);
  for (let i = 0; i < n; i++) {
    pts.push({
      x: Math.random() * W, y: Math.random() * H,
      vx: (Math.random() - 0.5) * 0.3,
      vy: (Math.random() - 0.5) * 0.3,
      r: Math.random() * 1.2 + 0.4,
      a: Math.random()
    });
  }
}

const COLORS = ['#22d3ee','#818cf8','#34d399','#f97316','#f472b6','#fbbf24'];

function drawBg() {
  bgCtx.clearRect(0, 0, W, H);
  // Draw connections between nearby points
  for (let i = 0; i < pts.length; i++) {
    for (let j = i + 1; j < pts.length; j++) {
      const dx = pts[i].x - pts[j].x, dy = pts[i].y - pts[j].y;
      const dist = Math.sqrt(dx*dx + dy*dy);
      if (dist < 110) {
        bgCtx.beginPath();
        bgCtx.strokeStyle = `rgba(34,211,238,${0.07 * (1 - dist / 110)})`;
        bgCtx.lineWidth = 0.5;
        bgCtx.moveTo(pts[i].x, pts[i].y);
        bgCtx.lineTo(pts[j].x, pts[j].y);
        bgCtx.stroke();
      }
    }
  }
  // Draw dots
  pts.forEach((p, i) => {
    bgCtx.beginPath();
    bgCtx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
    bgCtx.fillStyle = `rgba(34,211,238,${p.a * 0.5})`;
    bgCtx.fill();
    p.x += p.vx; p.y += p.vy;
    if (p.x < 0 || p.x > W) p.vx *= -1;
    if (p.y < 0 || p.y > H) p.vy *= -1;
  });
  requestAnimationFrame(drawBg);
}

initBg();
drawBg();
window.addEventListener('resize', initBg);

/* â”€â”€â”€ SVG RELATIONSHIPS â”€â”€â”€ */
const RELS = [
  // S1
  { f:'users',         t:'user_roles',        c:'#22d3ee', l:'1:N' },
  { f:'user_roles',    t:'roles',             c:'#22d3ee', l:'N:1' },
  { f:'roles',         t:'role_permissions',  c:'#22d3ee', l:'1:N' },
  { f:'role_permissions',t:'permissions',     c:'#22d3ee', l:'N:1' },
  { f:'users',         t:'user_addresses',    c:'#22d3ee', l:'1:N' },
  { f:'users',         t:'user_sessions',     c:'#22d3ee', l:'1:N' },
  // S2
  { f:'categories',    t:'category_attributes',c:'#818cf8', l:'1:N' },
  { f:'category_attributes',t:'attributes',   c:'#818cf8', l:'N:1' },
  { f:'attributes',    t:'attribute_values',  c:'#818cf8', l:'1:N' },
  { f:'categories',    t:'products',          c:'#818cf8', l:'1:N' },
  { f:'products',      t:'product_images',    c:'#818cf8', l:'1:N' },
  { f:'products',      t:'product_variants',  c:'#818cf8', l:'1:N' },
  { f:'product_variants',t:'product_variant_attributes',c:'#818cf8',l:'1:N'},
  { f:'products',      t:'product_attributes',c:'#818cf8', l:'1:N' },
  // S3
  { f:'orders',        t:'order_items',       c:'#34d399', l:'1:N' },
  { f:'orders',        t:'order_status_history',c:'#34d399',l:'1:N'},
  { f:'orders',        t:'order_notes',       c:'#34d399', l:'1:N' },
  { f:'orders',        t:'refunds',           c:'#34d399', l:'1:N' },
  { f:'refunds',       t:'refund_items',      c:'#34d399', l:'1:N' },
  { f:'orders',        t:'transactions_t',    c:'#34d399', l:'1:N' },
  { f:'order_addresses',t:'orders',           c:'#34d399', l:'1:N' },
  // S4
  { f:'products',      t:'inventory_logs',    c:'#f97316', l:'1:N' },
  { f:'products',      t:'stock_alerts',      c:'#f97316', l:'1:N' },
  { f:'warehouses',    t:'warehouse_inventory',c:'#f97316',l:'1:N' },
  { f:'warehouses',    t:'stock_transfers',   c:'#f97316', l:'1:N' },
  // S5
  { f:'users',         t:'vendors',           c:'#f472b6', l:'1:1' },
  { f:'vendors',       t:'vendor_bank_accounts',c:'#f472b6',l:'1:N'},
  { f:'vendors',       t:'vendor_payouts',    c:'#f472b6', l:'1:N' },
  // S6
  { f:'shipping_zones',t:'shipping_methods',  c:'#fbbf24', l:'1:N' },
  { f:'orders',        t:'shipments',         c:'#fbbf24', l:'1:N' },
  { f:'shipments',     t:'shipment_items',    c:'#fbbf24', l:'1:N' },
  { f:'shipments',     t:'shipment_tracking_events',c:'#fbbf24',l:'1:N'},
  // S7
  { f:'products',      t:'reviews',           c:'#fb7185', l:'1:N' },
  { f:'reviews',       t:'review_images',     c:'#fb7185', l:'1:N' },
  { f:'reviews',       t:'review_responses',  c:'#fb7185', l:'1:N' },
  { f:'reviews',       t:'review_votes',      c:'#fb7185', l:'1:N' },
  // S8
  { f:'coupons',       t:'coupon_products',   c:'#2dd4bf', l:'1:N' },
  { f:'coupons',       t:'coupon_categories', c:'#2dd4bf', l:'1:N' },
  { f:'coupons',       t:'coupon_usage',      c:'#2dd4bf', l:'1:N' },
  { f:'promotions',    t:'promotion_products',c:'#2dd4bf', l:'1:N' },
];

function getBox(id) {
  const el = document.getElementById(id);
  if (!el) return null;
  return {
    x: parseFloat(el.style.left)||0,
    y: parseFloat(el.style.top)||0,
    w: el.offsetWidth, h: el.offsetHeight
  };
}

function getEdgePoint(box, tx, ty) {
  const cx = box.x + box.w / 2;
  const cy = box.y + box.h / 2;
  const dx = tx - cx, dy = ty - cy;
  const hw = box.w / 2, hh = box.h / 2;
  const slope = dy / dx;
  let ex, ey;
  if (Math.abs(slope) < hh / hw) {
    ex = cx + (dx > 0 ? hw : -hw);
    ey = cy + slope * (dx > 0 ? hw : -hw);
  } else {
    ey = cy + (dy > 0 ? hh : -hh);
    ex = cx + (dy > 0 ? hh : -hh) / slope;
  }
  return { x: ex, y: ey };
}

// Animated dash offset for flowing lines
let dashOffset = 0;

function drawLines() {
  const svg = document.getElementById('svgLines');
  svg.innerHTML = '';

  // Defs
  const defs = document.createElementNS('http://www.w3.org/2000/svg','defs');
  const uniqueColors = [...new Set(RELS.map(r => r.c))];
  uniqueColors.forEach(col => {
    const mk = document.createElementNS('http://www.w3.org/2000/svg','marker');
    mk.setAttribute('id', 'mk'+col.replace('#',''));
    mk.setAttribute('markerWidth','7'); mk.setAttribute('markerHeight','7');
    mk.setAttribute('refX','6'); mk.setAttribute('refY','3.5');
    mk.setAttribute('orient','auto');
    const p = document.createElementNS('http://www.w3.org/2000/svg','polygon');
    p.setAttribute('points','0 0, 7 3.5, 0 7');
    p.setAttribute('fill', col); p.setAttribute('opacity','0.8');
    mk.appendChild(p); defs.appendChild(mk);
  });
  svg.appendChild(defs);

  RELS.forEach(rel => {
    const fb = getBox(rel.f), tb = getBox(rel.t);
    if (!fb || !tb) return;
    const fcx = fb.x + fb.w/2, fcy = fb.y + fb.h/2;
    const tcx = tb.x + tb.w/2, tcy = tb.y + tb.h/2;
    const fp = getEdgePoint(fb, tcx, tcy);
    const tp = getEdgePoint(tb, fcx, fcy);

    // Cubic bezier
    const dx = tp.x - fp.x, dy = tp.y - fp.y;
    const bend = Math.min(Math.abs(dx), Math.abs(dy), 120) * 0.6;
    const c1x = fp.x + bend * Math.sign(dx);
    const c1y = fp.y;
    const c2x = tp.x - bend * Math.sign(dx);
    const c2y = tp.y;

    // Glow path (wider, blurred)
    const glow = document.createElementNS('http://www.w3.org/2000/svg','path');
    glow.setAttribute('d', `M${fp.x} ${fp.y} C${c1x} ${c1y} ${c2x} ${c2y} ${tp.x} ${tp.y}`);
    glow.setAttribute('stroke', rel.c);
    glow.setAttribute('stroke-width','4');
    glow.setAttribute('fill','none');
    glow.setAttribute('opacity','0.08');
    glow.setAttribute('filter','url(#blur)');
    svg.appendChild(glow);

    // Main path
    const path = document.createElementNS('http://www.w3.org/2000/svg','path');
    path.setAttribute('d', `M${fp.x} ${fp.y} C${c1x} ${c1y} ${c2x} ${c2y} ${tp.x} ${tp.y}`);
    path.setAttribute('stroke', rel.c);
    path.setAttribute('stroke-width','1.5');
    path.setAttribute('fill','none');
    path.setAttribute('opacity','0.4');
    path.setAttribute('stroke-dasharray','6 4');
    path.setAttribute('stroke-dashoffset', dashOffset);
    path.setAttribute('marker-end', `url(#mk${rel.c.replace('#','')})`);
    path.style.transition = 'opacity 0.2s';
    path.addEventListener('mouseenter', e => {
      path.setAttribute('opacity','1'); path.setAttribute('stroke-width','2.5');
      const tip = document.getElementById('tip');
      tip.style.display = 'block';
      tip.textContent = `${rel.f}  â†’  ${rel.t}  (${rel.l})`;
      tip.style.left = (e.clientX + 12) + 'px';
      tip.style.top  = (e.clientY - 28) + 'px';
    });
    path.addEventListener('mouseleave', () => {
      path.setAttribute('opacity','0.4'); path.setAttribute('stroke-width','1.5');
      document.getElementById('tip').style.display = 'none';
    });
    svg.appendChild(path);

    // Relationship label
    const midX = (fp.x + tp.x) / 2;
    const midY = (fp.y + tp.y) / 2 - 7;
    const txt = document.createElementNS('http://www.w3.org/2000/svg','text');
    txt.setAttribute('x', midX); txt.setAttribute('y', midY);
    txt.setAttribute('text-anchor','middle');
    txt.setAttribute('font-size','8');
    txt.setAttribute('font-family','Fira Code, monospace');
    txt.setAttribute('fill', rel.c);
    txt.setAttribute('opacity','0.55');
    txt.textContent = rel.l;
    svg.appendChild(txt);
  });

  // blur filter
  const filterEl = document.createElementNS('http://www.w3.org/2000/svg','filter');
  filterEl.setAttribute('id','blur');
  const feBlur = document.createElementNS('http://www.w3.org/2000/svg','feGaussianBlur');
  feBlur.setAttribute('stdDeviation','3');
  filterEl.appendChild(feBlur);
  defs.appendChild(filterEl);
}

// Animate flowing dashes
function animateLines() {
  dashOffset -= 0.4;
  const paths = document.querySelectorAll('#svgLines path[stroke-dasharray]');
  paths.forEach(p => p.setAttribute('stroke-dashoffset', dashOffset));
  requestAnimationFrame(animateLines);
}

// â”€â”€ PAN & ZOOM â”€â”€
let scale = 0.5, dragging = false, sx, sy, sl, st;
const wrap = document.getElementById('cWrap');
const canvas = document.getElementById('canvas');

function updateCanvas() {
  canvas.style.transform = `scale(${scale})`;
  document.getElementById('zBadge').textContent = Math.round(scale * 100) + '%';
}

wrap.addEventListener('mousedown', e => {
  if (e.target.classList.contains('e') || e.target.closest('.e')) return;
  dragging = true;
  sx = e.pageX - wrap.offsetLeft;
  sy = e.pageY - wrap.offsetTop;
  sl = wrap.scrollLeft; st = wrap.scrollTop;
});
document.addEventListener('mouseup', () => dragging = false);
document.addEventListener('mousemove', e => {
  if (!dragging) return;
  wrap.scrollLeft = sl - (e.pageX - wrap.offsetLeft - sx);
  wrap.scrollTop  = st - (e.pageY - wrap.offsetTop  - sy);
});
wrap.addEventListener('wheel', e => {
  e.preventDefault();
  scale = Math.min(1.8, Math.max(0.15, scale + (e.deltaY < 0 ? 0.06 : -0.06)));
  updateCanvas();
}, { passive: false });

document.getElementById('zIn').onclick    = () => { scale = Math.min(1.8, scale + 0.1); updateCanvas(); };
document.getElementById('zOut').onclick   = () => { scale = Math.max(0.15, scale - 0.1); updateCanvas(); };
document.getElementById('zReset').onclick = () => { scale = 0.5; wrap.scrollLeft = 0; wrap.scrollTop = 0; updateCanvas(); };

// Init
wrap.style.height = (window.innerHeight - 100) + 'px';
window.addEventListener('resize', () => wrap.style.height = (window.innerHeight - 100) + 'px');
updateCanvas();

setTimeout(() => {
  drawLines();
  animateLines();
}, 300);
</script>
</body>
</html>